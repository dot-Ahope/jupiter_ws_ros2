# âœ… 270ë„ íšŒì „ ë¬¸ì œ ìˆ˜ì • ì™„ë£Œ

## ğŸ“‹ ìˆ˜ì • ë‚´ì—­

### 1. ê°ì†ë„ ìŠ¤ì¼€ì¼ë§ ìˆ˜ì • (3ë°° ë³´ì •)
```python
íŒŒì¼: transbot_driver.py
Line: 173-176

Before:
  base_speed = linear_x * (100.0 / 0.2)   # 0.2 m/s â†’ 100%
  turn_speed = angular_z * (100.0 / 0.5)  # 0.5 rad/s â†’ 100%

After:
  base_speed = linear_x * (100.0 / 0.6)   # 0.6 m/s â†’ 100% (1/3)
  turn_speed = angular_z * (100.0 / 1.5)  # 1.5 rad/s â†’ 100% (1/3)
```

**íš¨ê³¼**:
- ëª…ë ¹: 0.2 rad/s
- PWM: 13.3% (ì´ì „: 40%)
- ì˜ˆìƒ ì‹¤ì œ: 0.2 rad/s (ì´ì „: 0.6 rad/s)

### 2. IMU sensitivity_gain ìˆ˜ì • (2ë°° â†’ 1ë°°)
```python
íŒŒì¼: transbot_driver.py
Line: 298

Before:
  sensitivity_gain = 2.0

After:
  sensitivity_gain = 1.0
```

**íš¨ê³¼**:
- ì‹¤ì œ íšŒì „: 0.2 rad/s
- IMU ì›ë³¸: ~0.6 rad/s (í•˜ë“œì›¨ì–´ 3ë°° ì¦í­)
- ì¦í­ í›„: 0.6 rad/s (ì´ì „: 3.6 rad/s)

### 3. ë¹Œë“œ ì™„ë£Œ
```bash
âœ“ colcon build --packages-select transbot_bringup
âœ“ Summary: 1 package finished [2.99s]
```

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„

### 1. ë“œë¼ì´ë²„ ì¬ì‹œì‘ í•„ìš”
```bash
# ë°©ë²• 1: ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ (ìë™ ì¬ì‹œì‘)
pkill -f transbot_driver

# ë°©ë²• 2: ì „ì²´ ì‹œìŠ¤í…œ ì¬ì‹œì‘
# bringup launch íŒŒì¼ ì¬ì‹¤í–‰

# ë°©ë²• 3: ë…¸ë“œë§Œ ì¬ì‹œì‘
source ~/transbot_ws_ros2/install/setup.bash
ros2 run transbot_bringup transbot_driver
```

### 2. íšŒì „ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
cd ~/transbot_ws_ros2
./run_rotation_test.sh
```

### 3. ì˜ˆìƒ ê²°ê³¼
```
ëª©í‘œ: 90Â° íšŒì „
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ë¬¼ë¦¬ì :        90Â° Â± 10Â° âœ“
odom_raw:      90Â° Â± 10Â° âœ“
odom_filtered: 90Â° Â± 10Â° âœ“
IMU angular_z: 0.6 rad/s (3ë°° í•˜ë“œì›¨ì–´ íŠ¹ì„±)
```

## ğŸ“Š ìˆ˜ì • ì „í›„ ë¹„êµ

### Before (rotation_test_20251016_151757.csv)
```
ëª…ë ¹: 0.2 rad/s
PWM:  40%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì‹¤ì œ ë¬¼ë¦¬:    270Â° íšŒì „ (0.6 rad/s)
odom_raw:     124Â° (ëª…ë ¹ ê¸°ë°˜ ì¶”ì •)
IMU ì¸¡ì •:     3.6 rad/s (20ë°°!)
odom_filtered: 89Â° (EKF ë³´ì •)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ê²°ê³¼: 90Â° ëª©í‘œ â†’ 270Â° ì‹¤ì œ íšŒì „ âŒ
```

### After (ì˜ˆìƒ)
```
ëª…ë ¹: 0.2 rad/s
PWM:  13.3% (3ë°° ê°ì†Œ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì‹¤ì œ ë¬¼ë¦¬:    90Â° íšŒì „ (0.2 rad/s) âœ“
odom_raw:     90Â° (ëª…ë ¹ ê¸°ë°˜ ì¶”ì •) âœ“
IMU ì¸¡ì •:     0.6 rad/s (3ë°°, í•˜ë“œì›¨ì–´) âœ“
odom_filtered: 90Â° (EKF ë³´ì •) âœ“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ê²°ê³¼: 90Â° ëª©í‘œ â†’ 90Â° ì‹¤ì œ íšŒì „ âœ“
```

## âš ï¸ ì¶”ê°€ ë¯¸ì„¸ ì¡°ì • í•„ìš” ê°€ëŠ¥ì„±

### 1. 3ë°°ê°€ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ
- í…ŒìŠ¤íŠ¸ í›„ ì‹¤ì œ ë¹„ìœ¨ í™•ì¸
- í•„ìš” ì‹œ ìŠ¤ì¼€ì¼ íŒ©í„° ì¬ì¡°ì •

### 2. ë°”ë‹¥ ì¬ì§ˆ ì˜í–¥
- ìŠ¬ë¦½ ë°œìƒ ì‹œ ì˜¤ì°¨ ì¦ê°€
- ë‹¨ë‹¨í•œ ë°”ë‹¥ì—ì„œ í…ŒìŠ¤íŠ¸ ê¶Œì¥

### 3. IMU í•˜ë“œì›¨ì–´ íŠ¹ì„±
- ì—¬ì „íˆ 3ë°° ì¦í­ë  ìˆ˜ ìˆìŒ
- EKF íŒŒë¼ë¯¸í„° ì¡°ì • í•„ìš”

## ğŸ§ª ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Step 1: ë“œë¼ì´ë²„ ì¬ì‹œì‘ í™•ì¸
```bash
# í™•ì¸
ps aux | grep transbot_driver
ros2 topic hz /transbot/imu
ros2 topic hz /transbot/get_vel
```
- [ ] transbot_driver í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì¤‘
- [ ] /transbot/imu í† í”½ ë°œí–‰ í™•ì¸ (100Hz)
- [ ] /transbot/get_vel í† í”½ ë°œí–‰ í™•ì¸ (10Hz)

### Step 2: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
cd ~/transbot_ws_ros2
./run_rotation_test.sh
```
- [ ] ìŠ¤í¬ë¦½íŠ¸ ì •ìƒ ì‹¤í–‰
- [ ] ë¡œë´‡ì´ íšŒì „ ì‹œì‘
- [ ] ë°ì´í„° ìˆ˜ì§‘ ì¤‘ (CSV ìƒì„±)

### Step 3: ë¬¼ë¦¬ì  íšŒì „ ê´€ì°°
- [ ] ë¡œë´‡ì´ ì•½ 90Â° íšŒì „
- [ ] ì—­íšŒì „ ì—†ì´ ë¶€ë“œëŸ½ê²Œ ì •ì§€
- [ ] íšŒì „ ë°©í–¥ ì˜¬ë°”ë¦„ (ë°˜ì‹œê³„ë°©í–¥)

### Step 4: ë°ì´í„° ë¶„ì„
```bash
# ìµœì‹  CSV íŒŒì¼ í™•ì¸
ls -lht rotation_test_*.csv | head -1

# ë°ì´í„° í™•ì¸
tail -30 rotation_test_*.csv
```
- [ ] odom_raw ìµœì¢… ê°ë„: 80~100Â°
- [ ] odom_filtered ìµœì¢… ê°ë„: 80~100Â°
- [ ] IMU angular_z: ~0.6 rad/s (ì´ì „ 3.6 rad/s)

### Step 5: ì˜¤ì°¨ í‰ê°€
- [ ] ë¬¼ë¦¬ì  ì˜¤ì°¨: Â±10Â° ì´ë‚´
- [ ] odom_raw ì˜¤ì°¨: Â±10Â° ì´ë‚´
- [ ] odom_filtered ì˜¤ì°¨: Â±5Â° ì´ë‚´

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

### ìµœì†Œ ê¸°ì¤€ (í—ˆìš©)
- ë¬¼ë¦¬ì  íšŒì „: 80~100Â° (Â±10Â°)
- odom_raw: 80~100Â° (Â±10Â°)
- ì§„ë™ ì—†ìŒ (ì—­íšŒì „ ë°œìƒ ì•ˆ í•¨)

### ëª©í‘œ ê¸°ì¤€ (ì´ìƒì )
- ë¬¼ë¦¬ì  íšŒì „: 85~95Â° (Â±5Â°)
- odom_raw: 85~95Â° (Â±5Â°)
- odom_filtered: 87~93Â° (Â±3Â°)
- IMU angular_z: 0.5~0.7 rad/s

### ìš°ìˆ˜ ê¸°ì¤€ (ì™„ë²½)
- ë¬¼ë¦¬ì  íšŒì „: 88~92Â° (Â±2Â°)
- odom_raw: 88~92Â° (Â±2Â°)
- odom_filtered: 89~91Â° (Â±1Â°)
- IMUì™€ wheel ë°ì´í„° ì¼ì¹˜

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ

### ì—¬ì „íˆ 270Â° íšŒì „í•˜ëŠ” ê²½ìš°
```python
# ë” í° ë³´ì • í•„ìš” (ì˜ˆ: 5ë°°)
turn_speed = angular_z * (100.0 / 2.5)  # 2.5 rad/s â†’ 100%
```

### ë„ˆë¬´ ëŠë¦¬ê²Œ íšŒì „í•˜ëŠ” ê²½ìš°
```python
# ë” ì‘ì€ ë³´ì • (ì˜ˆ: 2ë°°)
turn_speed = angular_z * (100.0 / 1.0)  # 1.0 rad/s â†’ 100%
```

### IMU ê°’ì´ ì—¬ì „íˆ í° ê²½ìš°
```python
# sensitivity_gain ë” ê°ì†Œ
sensitivity_gain = 0.5  # ë˜ëŠ” 0.33
```

### EKFê°€ ì—¬ì „íˆ ê±°ë¶€í•˜ëŠ” ê²½ìš°
```yaml
# ekf_config.yaml ìˆ˜ì •
odom0_rejection_threshold: 10.0  # 5.0ì—ì„œ ì¦ê°€
imu0_rejection_threshold: 5.0    # 2.0ì—ì„œ ì¦ê°€
```

## ğŸ’¡ ë‹¤ìŒ ê°œì„  ì‚¬í•­

1. **ì‹¤ì œ ì†ë„ í”¼ë“œë°±** (í–¥í›„)
   - IMU ì ë¶„ìœ¼ë¡œ ì‹¤ì œ ê°ì†ë„ ê³„ì‚°
   - PWM ë™ì  ë³´ì •

2. **ìŠ¬ë¦½ ê°ì§€** (í–¥í›„)
   - odom vs IMU ì°¨ì´ ëª¨ë‹ˆí„°ë§
   - ë¯¸ë„ëŸ¬ì§ ê²½ê³ 

3. **ì •ë°€ ìº˜ë¦¬ë¸Œë ˆì´ì…˜** (í–¥í›„)
   - ì—¬ëŸ¬ ì†ë„ì—ì„œ í…ŒìŠ¤íŠ¸
   - ë¹„ì„ í˜• ë³´ì • í…Œì´ë¸” ìƒì„±

## ğŸ‰ ê¸°ëŒ€ íš¨ê³¼

1. âœ… ë¬¼ë¦¬ì  íšŒì „ = ëª…ë ¹ íšŒì „
2. âœ… IMU ë°ì´í„° ì‹ ë¢°ì„± í–¥ìƒ
3. âœ… EKF ìœµí•© ì •ìƒí™”
4. âœ… SLAM íšŒì „ ì¤‘ ì •í™•ë„ í–¥ìƒ
5. âœ… ììœ¨ì£¼í–‰ ì•ˆì •ì„± ì¦ê°€
