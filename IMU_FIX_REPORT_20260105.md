# 2026-01-05 09:55:00 - IMU 방향 반전 문제 해결 보고서

## 1. 문제 개요
* **증상**: 로봇을 좌측(반시계 방향)으로 회전시켰을 때, Rviz2 상에서는 로봇이 우측(시계 방향)으로 회전하는 현상 발생.
* **원인**: 
  1. `Rosmaster_Lib.py` 라이브러리 내부에서 자이로스코프(Gyro) 데이터의 부호를 임의로 반전시키고 있었음 (하드웨어 특성 또는 레거시 코드).
  2. `jupiter_driver.py`에서 이를 보정하기 위한 파라미터가 부재했음.

## 2. 해결 과정
### A. 라이브러리 레벨 수정 (`Rosmaster_Lib.py`)
* **수정 내용**: `FUNC_REPORT_MPU_RAW` 데이터 파싱 부분에서 Y축, Z축 각속도에 적용되던 `-` 부호를 제거하여 정방향 데이터가 출력되도록 수정.

### B. 드라이버 파라미터화 (`jupiter_driver.py`)
* **기능 추가**: 하드웨어 장착 방향에 따라 유연하게 대처할 수 있도록 `imu_invert_x`, `imu_invert_y`, `imu_invert_z` 파라미터 추가.
* **로직 구현**: 파라미터가 `true`일 경우 해당 축의 각속도 부호를 반전시키는 로직 적용.

### C. 설정 파일 적용 (`jupiter_driver_params.yaml`)
* **최종 설정**: `imu_invert_z: true`로 설정하여, 최종적으로 ROS 좌표계(ENU: East-North-Up, 반시계가 +)와 일치시킴.

## 3. 검증 결과
* `check_imu_direction.py` 스크립트를 통한 검증 완료.
* 로봇을 좌측으로 회전 시 **Positive (+)** 각속도가 출력됨을 확인.
* Rviz2 상에서 로봇의 회전 방향이 실제와 일치함.
