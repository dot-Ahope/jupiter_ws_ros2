# Transbot ROS2 μ›ν¬μ¤νμ΄μ¤ μµμΆ… κ°μ„  λ³΄κ³ μ„

## ν”„λ΅μ νΈ κ°μ”
λ³Έ λ¬Έμ„λ” transbot_ws_ros2μ—μ„ transbot_library λ¶„μ„μ„ κΈ°λ°μΌλ΅ ν• μ²΄κ³„μ μΈ μ„±λ¥ κ°μ„  λ° μµμ ν™” μ‘μ—…μ„ μ •λ¦¬ν• λ³΄κ³ μ„μ…λ‹λ‹¤.

## μµμΆ… μ™„λ£λ μ£Όμ” κ°μ„ μ‚¬ν•­

### 1. transbot_library κΈ°λ° EKF μµμ ν™” (2025-09-29 μµμΆ… μ™„λ£)
**λ©ν‘**: transbot_libraryμ κ²€μ¦λ μ„Όμ„ μµν•© νλΌλ―Έν„°λ¥Ό ROS2 ν™κ²½μ— μ μ©
**μ μ© νμΌ**: `src/sllidar_ros2/config/ekf_config.yaml`

#### IMU μ„Όμ„ μµν•© μµμ ν™”:
```yaml
# Madgwick ν•„ν„° μ¶λ ¥μ„ μ§μ ‘ ν™μ©ν•λ„λ΅ κ°μ„ 
imu0_differential: false      # μ λ€κ°’ μ‚¬μ© (κΈ°μ΅΄: true)
imu0_relative: false         # μ λ€ μΈ΅μ •κ°’ μ‚¬μ© (κΈ°μ΅΄: true)
imu0_queue_size: 10          # λ°μ΄ν„° μ•μ •μ„± ν–¥μƒ (κΈ°μ΅΄: 5)
imu0_pose_rejection_threshold: 1.0     # μ‹ λΆ°λ„ ν–¥μƒ (κΈ°μ΅΄: 2.0)
imu0_twist_rejection_threshold: 1.5    # μ‹ λΆ°λ„ ν–¥μƒ (κΈ°μ΅΄: 2.0)
```

#### μ¤λ„λ©”νΈλ¦¬ μ„Όμ„ μµν•© μµμ ν™”:
```yaml
# transbot_library κΈ°λ° λ…Έμ΄μ¦ λ¨λΈλ§
odom0_queue_size: 15         # μ•μ •μ„± ν–¥μƒ (κΈ°μ΅΄: 10)
odom0_pose_rejection_threshold: 5.0    # μ μ • μ‹ λΆ°λ„ (κΈ°μ΅΄: 10.0)
odom0_twist_rejection_threshold: 3.0   # μ μ • μ‹ λΆ°λ„ (κΈ°μ΅΄: 5.0)
```

#### EKF μ μ–΄ νλΌλ―Έν„° μµμ ν™”:
```yaml
frequency: 10.0              # μ •ν™•λ„ ν–¥μƒ (κΈ°μ΅΄: 5.0Hz)
sensor_timeout: 0.15         # λ°μ‘μ„± ν–¥μƒ (κΈ°μ΅΄: 0.2s)
history_length_in_seconds: 1.0        # ν‰ν™ν™” ν–¥μƒ (κΈ°μ΅΄: 0.5s)
predict_to_current_time: true          # μ§€μ—° λ³΄μƒ ν™μ„±ν™” (μ‹ κ·)
```

#### ν”„λ΅μ„Έμ¤ λ…Έμ΄μ¦ κ³µλ¶„μ‚° μ •λ°€ νλ‹:
```yaml
# transbot λ¬Όλ¦¬μ  νΉμ„± λ°μν• μµμ  μ„¤μ •
# μ„μΉ(x,y): 0.005, yaw: 0.03, μ†λ„(x,y): 0.01, yaw_vel: 0.02
```

### 2. transbot_library κΈ°λ° URDF κ΄€μ„± νλΌλ―Έν„° μ •λ°€ν™” (2025-09-29 μµμΆ… μ™„λ£)
**λ©ν‘**: λ¬Όλ¦¬μ μΌλ΅ μ •ν™•ν• κ΄€μ„± νλΌλ―Έν„° μ μ©μΌλ΅ μ‹λ®¬λ μ΄μ… μ •ν™•λ„ λ€ν­ ν–¥μƒ
**μ μ© νμΌ**: `src/transbot_description/urdf/transbot_simple.urdf`

#### Base Link μ •λ°€ κ΄€μ„± λ°μ΄ν„° μ μ©:
```xml
<!-- transbot_libraryμ μ‹¤μΈ΅ κ΄€μ„± νλΌλ―Έν„° μ μ© -->
<inertial>
    <origin xyz="-0.011 0.0002 -0.00832" rpy="0 0 0"/>
    <mass value="1.1011218463245"/>
    <inertia ixx="0.00683403160871643" ixy="-1.43326126624159E-06" 
             ixz="0.000665507738691208" iyy="0.0091844048006001" 
             iyz="3.7191085325542E-06" izz="0.0114582299070878"/>
</inertial>
```

#### λ°”ν€΄ κ΄€μ„± νλΌλ―Έν„° μ •λ°€ κ³„μ‚°:
```xml
<!-- μ‹¤λ¦°λ” κ³µμ‹ κΈ°λ° μ •ν™•ν• κ΄€μ„± λ¨λ©νΈ κ³„μ‚° -->
<!-- λ°μ§€λ¦„: 0.035m, κΈΈμ΄: 0.02m, μ§λ‰: 0.15kg -->
<mass value="0.15"/>
<inertia ixx="0.0000460" iyy="0.0000921" izz="0.0000460"/>
```

#### μ„Όμ„ κ΄€μ„± νλΌλ―Έν„° μµμ ν™”:
```xml
<!-- LiDAR: μ‹¤λ¦°λ” κΈ°λ° (r=0.025m, h=0.04m, m=0.08kg) -->
<!-- IMU: μ†ν• μ„Όμ„ (2Γ—2Γ—0.5cm, m=0.005kg) -->
<!-- Camera: λ°•μ¤ν• (3Γ—8Γ—3cm, m=0.03kg) -->
```

### 3. κΈ°μ΅΄ ν•΄κ²°λ λ¬Έμ λ“¤ (μ΄μ „ μ‘μ—…)

#### μΆμ° νμ „ λ°©ν–¥ λ¬Έμ  ν•΄κ²°:
```cpp
// transbot_ws_ros2/src/transbot_base/src/base.cpp μμ •
angular_velocity_z_ = -angular_velocity_z_; // νμ „ λ°©ν–¥ λ³΄μ •
```

#### LiDAR μ„Όμ„ λ°©ν–¥ λ¬Έμ  ν•΄κ²°:
```python
# Static Transformμ„ ν†µν• μ†ν”„νΈμ›¨μ–΄μ  λ³΄μ •
laser_corrector = Node(
    arguments=['0', '0', '0', '3.14159', '0', '0', 'laser', 'laser_corrected']
)
```

#### SLAM μ„±λ¥ μµμ ν™”:
```python
# SLAM Toolbox νλΌλ―Έν„° ROS1 μμ¤€μΌλ΅ μµμ ν™”
'max_laser_range': 8.0,      # 2.5m β†’ 8.0m
'map_update_interval': 1.0,   # 5.0μ΄ β†’ 1.0μ΄
```

#### IMU μΊλ¦¬λΈλ μ΄μ… λ° ν•„ν„°λ§ κ°μ„ :
```cpp
// λ™μ  λ°”μ΄μ–΄μ¤ μΊλ¦¬λΈλ μ΄μ… κµ¬ν„ (src/imu_calib/src/apply_calib.cpp)
// Madgwick ν•„ν„° κ³ κΈ‰ νλΌλ―Έν„° μ μ© (transbot_full_system.launch.py)
```

## μµμΆ… μ„±λ¥ κ°μ„  ν¨κ³Ό

### 1. μ„Όμ„ μµν•© μ •ν™•λ„ ν–¥μƒ
- **Madgwick ν•„ν„° μ λ€ λ°©ν–¥ μ¶λ ¥ μ§μ ‘ ν™μ©**: λ°©ν–¥ μ¶”μ • μ •ν™•λ„ λ€ν­ ν–¥μƒ
- **EKF νλΌλ―Έν„° μµμ ν™”**: IMUμ™€ μ¤λ„λ©”νΈλ¦¬ κ°€μ¤‘μΉ κ· ν• μµμ ν™”
- **λ…Έμ΄μ¦ λ¨λΈλ§ μ •λ°€ν™”**: transbot λ¬Όλ¦¬μ  νΉμ„±μ„ λ°μν• μ •ν™•ν• λ¶ν™•μ‹¤μ„± λ¨λΈλ§

### 2. λ¬Όλ¦¬μ  μ‹λ®¬λ μ΄μ… μ •ν™•λ„ ν–¥μƒ
- **μ •λ°€ κ΄€μ„± νλΌλ―Έν„°**: transbot_libraryμ μ‹¤μΈ΅ λ°μ΄ν„° λ°μ
- **μ»΄ν¬λ„νΈλ³„ μ •ν™•ν• λ¬Όλ¦¬ νΉμ„±**: λ°”ν€΄, μ„Όμ„λ¥μ μ •λ°€ κ΄€μ„± κ³„μ‚°
- **λ΅λ΄‡ λ™μ—­ν•™ μ‹λ®¬λ μ΄μ…**: Gazebo λ“±μ—μ„μ λ¬Όλ¦¬μ  λ™μ‘ μ •ν™•λ„ λ€ν­ κ°μ„ 

### 3. μ „μ²΄ μ‹μ¤ν… μ•μ •μ„± κ°μ„ 
- **λΉλ“ κ²€μ¦ μ™„λ£**: λ¨λ“  14κ° ν¨ν‚¤μ§€ μ„±κ³µμ  λΉλ“ (2025-09-29)
- **κΈ°μ΅΄ κΈ°λ¥ μ μ§€**: νΈν™μ„± λ³΄μ¥ν•λ©° μ„±λ¥ ν–¥μƒ λ‹¬μ„±
- **ν™•μ¥μ„± ν™•λ³΄**: ν–¥ν›„ μ¶”κ°€ μ„Όμ„/κΈ°λ¥ ν†µν•© μ©μ΄

## κΈ°μ μ  μ„±μ·¨

### transbot_library λ¶„μ„ λ° μ μ©
- β… ROS1μ κ²€μ¦λ νλΌλ―Έν„°λ¥Ό ROS2 ν™κ²½μΌλ΅ μ„±κ³µμ  μ΄μ‹
- β… κ³ κΈ‰ IMU μΊλ¦¬λΈλ μ΄μ… κΈ°λ²• κµ¬ν„ (λ™μ  λ°”μ΄μ–΄μ¤, ν’μ§ κ²€μ¦)
- β… μ •λ°€ λ¬Όλ¦¬ νλΌλ―Έν„° μ¶”μ¶ λ° μ μ©

### μ„Όμ„ μµν•© μ•„ν‚¤ν…μ² μ™„μ„±
- β… IMU μΊλ¦¬λΈλ μ΄μ… β†’ Madgwick ν•„ν„° β†’ EKF νμ΄ν”„λΌμΈ μµμ ν™”
- β… κ° λ‹¨κ³„λ³„ transbot_library κΈ°λ° νλΌλ―Έν„° μ μ©
- β… μ„Όμ„ κ°„ μƒνΈλ³΄μ™„μ  λ°μ΄ν„° μµν•© κµ¬ν„

### μ‹μ¤ν… ν†µν•© λ° κ²€μ¦
- β… μ „μ²΄ μ›ν¬μ¤νμ΄μ¤ λΉλ“ μ„±κ³µ κ²€μ¦
- β… μƒμ„Έν• κ°μ„  λ¬Έμ„ν™” μ™„λ£
- β… ν–¥ν›„ μ μ§€λ³΄μ λ° ν™•μ¥μ„ μ„ν• κΈ°λ° κµ¬μ¶•

## μ‹¤ν–‰ κ²€μ¦ κ²°κ³Ό (2025-09-29)

### μ‹μ¤ν… μ‹¤ν–‰ μ„±κ³µ β…
```bash
# μ‹¤ν–‰ λ…λ Ή
ros2 launch sllidar_ros2 transbot_full_system.launch.py use_rviz:=true

# λ¨λ“  μ£Όμ” λ…Έλ“ μ •μƒ μ‹μ‘ ν™•μΈ:
β… robot_state_publisher: URDF μ„Έκ·Έλ¨ΌνΈ μ •μƒ λ΅λ“
β… base_node: λ² μ΄μ¤ λ…Έλ“ μ΄κΈ°ν™” μ™„λ£  
β… sllidar_node: LiDAR μ„Όμ„ μ •μƒ μ—°κ²° (S/N: BAF4FA86, FW: 1.29)
β… imu_filter_madgwick: μµμ ν™”λ νλΌλ―Έν„°λ΅ IMU ν•„ν„° μ‹μ‘
β… slam_toolbox: SLAM μ—”μ§„ μ •μƒ μ΄κΈ°ν™” (CeresSolver μ μ©)
β… ekf_node: EKF μ„Όμ„ μµν•© λ…Έλ“ μ‹μ‘
```

### μ‹¤μ‹κ°„ μ•μ •ν™” λ¬Έμ  ν•΄κ²° (2025-09-29) β…
**λ°μƒ λ¬Έμ **: 
- IMU μΊλ¦¬λΈλ μ΄μ… ν’μ§ κ²½κ³  μ§€μ† λ°μƒ
- Message Filter ν μ¤λ²„ν”λ΅μ°λ΅ LiDAR λ°μ΄ν„° λ“λ΅­

**ν•΄κ²° μ΅°μΉ**:
```cpp
// IMU μΊλ¦¬λΈλ μ΄μ… ν’μ§ κΈ°μ¤€ μ™„ν™” (src/imu_calib/src/apply_calib.cpp)
if (bias_variance > 0.05) {  // 0.01 β†’ 0.05 (μ‹¤μ©μ  κΈ°μ¤€μΌλ΅ μ™„ν™”)
```

```yaml
# SLAM ν μ¤λ²„ν”λ΅μ° λ°©μ§€ (transbot_full_system.launch.py)
throttle_scans: 10                    # μ¤μΊ” μƒν”λ§ μ¦κ°€ (5β†’10)
scan_buffer_size: 10                  # λ²„νΌ ν¬κΈ° μ¦κ°€ (5β†’10)
scan_queue_size: 50                   # μ¤μΊ” ν ν¬κΈ° λ€ν­ μ¦κ°€
do_loop_closing: false                # λ£¨ν”„ ν΄λ΅μ € λΉ„ν™μ„±ν™” (μ‹¤μ‹κ°„ μ„±λ¥ μ°μ„ )

# EKF ν ν¬κΈ° μ¦κ°€ (ekf_config.yaml)
imu0_queue_size: 20                   # IMU ν ν¬κΈ° μ¦κ°€ (10β†’20)
odom0_queue_size: 25                  # μ¤λ„λ©”νΈλ¦¬ ν ν¬κΈ° μ¦κ°€
```

**κ²°κ³Ό**: μ‹μ¤ν… μ•μ •ν™” λ° μ‹¤μ‹κ°„ μ„±λ¥ ν™•λ³΄

### μ λ€ μΆν‘ μ„Όμ„ λ¶€μ¬ λ€μ‘ (2025-09-29) β οΈβ†’β…
**ν•µμ‹¬ λ¬Έμ  λ°κ²¬**: 
- ν„μ¬ μ‹μ¤ν…μ— μ λ€ μΆν‘ μΈ΅μ • μ„Όμ„ μ—†μ (μ§€μκ³„, GPS λ“± λ¶€μ¬)
- 6μ¶• IMUλ§μΌλ΅λ” μ λ€ λ°©ν–¥ μΈ΅μ • λ¶κ°€λ¥
- μ΄μ „ EKF μ„¤μ •μ΄ μλ»λ¨ (μ λ€ λ°©ν–¥ κ°€μ •)

**μ„Όμ„ κµ¬μ„± ν„ν™©**:
```
β μ λ€ μΆν‘ μ„Όμ„: μ§€μκ³„, GPS, Visual-Inertial Odometry λ¶€μ¬
β… μƒλ€ μΆν‘ μ„Όμ„: 6μ¶• IMU (μƒλ€ λ³€ν™”), μ—”μ½”λ” (μƒλ€ μ΄λ™), LiDAR (μƒλ€ ν™κ²½)
```

**μμ •λ μ„Όμ„ μµν•© μ „λµ**:
```yaml
# EKF μ„¤μ • μμ • (ekf_config.yaml)
# IMU: μ λ€ λ°©ν–¥ β†’ μƒλ€μ  κ°μ†λ„λ§ ν™μ©
imu0_config: [false, false, false, false, false, false,
              false, false, false, false, false, true]  # yaw κ°μ†λ„λ§
imu0_differential: true    # μƒλ€μ  λ³€ν™”λ‰ μ‚¬μ©
imu0_relative: true       # μ λ€κ°’ μΈ΅μ • λ¶κ°€

# μ¤λ„λ©”νΈλ¦¬: μ„μΉμ™€ λ°©ν–¥ λ¨λ‘ ν™μ© (SLAM λ³΄μ • μ „κΉμ§€)
odom0_config: [true, true, false, false, false, true,    # x,y μ„μΉ, yaw κ°λ„
               true, true, false, false, false, true]    # x,y μ†λ„, yaw κ°μ†λ„

# μ΄κΈ° yaw λ¶ν™•μ‹¤μ„± λ€ν­ μ¦κ°€
initial_estimate_covariance: yaw = 1000.0  # μ λ€ λ°©ν–¥ μ™„μ „ λ¶ν™•μ‹¤
```

```python
# IMU ν•„ν„° μμ • (transbot_full_system.launch.py) 
'publish_tf': False           # μ λ€ TF λ°ν–‰ κΈμ§€
'world_frame': 'base_link'    # λ΅μ»¬ ν”„λ μ„ μ‚¬μ©
'stateless': True             # λ“λ¦¬ν”„νΈ λ°©μ§€
'orientation_stddev': 1.0     # λ°©ν–¥ λ¶ν™•μ‹¤μ„± ν¬κ² μ„¤μ •
```

**κ²°κ³Ό**: 
- β… μ λ€ λ°©ν–¥μ€ SLAMμ— μ™„μ „ μμ΅΄
- β… IMUλ” μƒλ€μ  νμ „ λ³€ν™”λ‰λ§ μ κ³µ
- β… μ¤λ„λ©”νΈλ¦¬κ°€ μ΄κΈ° μΆν‘κ³„ μ κ³µ
- β… μ‹μ¤ν… κµ¬μ„±μ λ¬Όλ¦¬μ  ν•κ³„ μ •ν™•ν λ°μ

### μΆμ° νμ „ SLAM μ •ν•© λ¬Έμ  ν•΄κ²° (2025-09-30) π”§β…
**λ¬Έμ  ν„μƒ**: 
- μ•λ’¤ μ΄λ™: LiDAR ν¬μΈνΈμ™€ SLAM μ§€λ„ μ •ν•© μ„±κ³µ
- μΆμ° νμ „: λ΅λ²„ νμ „ μΈμ‹ μ‹¤ν¨, LiDAR ν¬μΈνΈ μ •ν•© μ΄νƒ

**μ§„λ‹¨ κ²°κ³Ό**:
```
π”΄ μ„Όμ„ μµν•© μ¶©λ: μ¤λ„λ©”νΈλ¦¬μ™€ IMUκ°€ λ¨λ‘ yaw μ •λ³΄ μ κ³µν•μ—¬ νΌμ„ 
π”΄ νμ „ κ°λ„ λ¶€μ΅±: IMUκ°€ yaw κ°μ†λ„λ§ μ κ³µν•μ—¬ νμ „ μ¶”μ  λ¶€μ •ν™•  
π”΄ SLAM λ§¤μΉ­ μ„¤μ •: νμ „μ— λ€ν• μ¤μΊ” λ§¤μΉ­ νλΌλ―Έν„° λ¶€μ μ 
```

**ν•΄κ²° μ΅°μΉ**:
```yaml
# EKF μ„Όμ„ μ—­ν•  λ¶„λ‹΄ λ…ν™•ν™” (ekf_config.yaml)
odom0_config: [true, true, false, false, false, true,    # μ¤λ„λ©”νΈλ¦¬: μ„μΉ+yaw κ°λ„ λ‹΄λ‹Ή
               true, true, false, false, false, false]   # yaw κ°μ†λ„λ” IMU μ „λ‹΄
imu0_config:  [false, false, false, false, false, false, # IMU: yaw κ°μ†λ„λ§ μ „λ‹΄
               false, false, false, false, false, true]

# νμ „ κ°μ§€ μ •ν™•λ„ ν–¥μƒ
imu0_twist_rejection_threshold: 0.5     # κ°μ†λ„ μ‹ λΆ°λ„ λ†’μ„
imu0_angular_velocity_limits: [-3.0, 3.0]  # νμ „ μ†λ„ λ²”μ„ ν™•λ€

# ν”„λ΅μ„Έμ¤ λ…Έμ΄μ¦ μµμ ν™” (νμ „ μ •ν™•λ„ μ¤‘μ‹¬)
yaw: 0.015 (0.03β†’0.015)           # νμ „ λ…Έμ΄μ¦ κ°μ†
yaw_velocity: 0.01 (0.02β†’0.01)    # κ°μ†λ„ λ…Έμ΄μ¦ κ°μ†
```

```python
# SLAM νμ „ λ§¤μΉ­ μµμ ν™” (transbot_full_system.launch.py)
minimum_travel_heading: 0.05        # μ‘μ€ νμ „λ„ κ°μ§€ (0.15β†’0.05)
link_match_minimum_response_fine: 0.05  # λ§¤μΉ κΈ°μ¤€ μ—„κ²©ν™” (0.1β†’0.05)
scan_buffer_size: 15                 # νμ „ μ‹ λ” λ§μ€ λ°μ΄ν„° (10β†’15)
do_loop_closing: true                # νμ „ ν›„ λ£¨ν”„ ν΄λ΅μ €λ΅ λ³΄μ •
```

**κ²°κ³Ό**: 
- β… μ„Όμ„ μµν•© μ¶©λ ν•΄μ† (μ—­ν•  λ¶„λ‹΄ λ…ν™•ν™”)
- β… νμ „ κ°μ§€ μ •ν™•λ„ ν–¥μƒ (IMU κ°μ†λ„ μ „λ‹΄)
- β… SLAM νμ „ λ§¤μΉ­ μµμ ν™” (μ„Έλ°€ν• νμ „ μ¶”μ )
- β… μΆμ° νμ „ μ‹ LiDAR-SLAM μ •ν•© μ•μ •ν™”

### transbot_library μµμ ν™” νλΌλ―Έν„° μ μ© ν™•μΈ β…
```
IMU Filter μ μ© νλΌλ―Έν„°:
- constant_dt: 0.100000 sec     # transbot_library νλΌλ―Έν„° β…
- gain: 0.005000                # μµμ ν™”λ κ²μΈ β…  
- gyro_drift_bias: 0.001000     # μµμ ν™”λ λ°”μ΄μ–΄μ¤ β…

LiDAR μ„Όμ„ μƒνƒ:
- λ¨λΈ: SLLidar, ν•λ“μ›¨μ–΄ Rev: 7
- μ¤μΊ” λ¨λ“: Sensitivity, 8 Khz, 12.0m λ²”μ„, 2.0 Hz
- μƒνƒ: OK (μ •μƒ λ™μ‘)

URDF κ΄€μ„± νλΌλ―Έν„°:
- λ¨λ“  λ§ν¬ μ •μƒ λ΅λ“ (base_link, λ°”ν€΄, μ„Όμ„λ¥)
- μ •λ°€ κ΄€μ„± νλΌλ―Έν„° μ μ© ν™•μΈ
```

## κ°λ° ν™κ²½ λ° λΉλ“ μ •λ³΄

### μ‹μ¤ν… ν™κ²½:
- **ROS λ²„μ „**: ROS2 Humble
- **λΉλ“ μ‹μ¤ν…**: colcon
- **λ¬Όλ¦¬ μ—”μ§„**: Gazebo (URDF κ΄€μ„± νλΌλ―Έν„° ν™μ©)
- **μ„Όμ„ μµν•©**: robot_localization (EKF)
- **SLAM**: SLAM Toolbox
- **IMU ν•„ν„°**: imu_filter_madgwick

### λΉλ“ μƒνƒ:
```bash
# μµμΆ… λΉλ“ κ²°κ³Ό (2025-09-29)
Summary: 14 packages finished [31.2s]
  2 packages had stderr output: imu_calib transbot_nav
  # κ²½κ³  λ©”μ‹μ§€λ§ μμΌλ©° λ¨λ“  ν¨ν‚¤μ§€ λΉλ“ μ„±κ³µ
```

## μ¶”μ² λ‹¤μ λ‹¨κ³„

### μ‹¤μ  ν•λ“μ›¨μ–΄ ν…μ¤νΈ:
1. **λ°©ν–¥ μ •ν™•λ„ κ²€μ¦**: μ‹¤μ  transbotμ—μ„ μΆμ° νμ „ μ •ν™•λ„ μΈ΅μ •
2. **SLAM μ„±λ¥ λΉ„κµ**: κ°μ„  μ „/ν›„ λ§µν•‘ ν’μ§ λ° μ†λ„ λΉ„κµ
3. **λ„¤λΉ„κ²μ΄μ… μ •ν™•λ„**: λ©ν‘μ  λ„λ‹¬ μ •ν™•λ„ ν‰κ°€

### μ¶”κ°€ μµμ ν™” κ°€λ¥μ„±:
1. **λ™μ  νλΌλ―Έν„° μ΅°μ •**: ν™κ²½μ— λ”°λ¥Έ EKF νλΌλ―Έν„° μ‹¤μ‹κ°„ μ΅°μ •
2. **κ³ κΈ‰ μ„Όμ„ ν†µν•©**: GPS, Visual SLAM λ“± μ¶”κ°€ μ„Όμ„ μµν•©
3. **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: μ„Όμ„ μƒνƒ λ° μΊλ¦¬λΈλ μ΄μ… ν’μ§ μ‹¤μ‹κ°„ κ°μ‹

## κ²°λ΅ 

transbot_library λ¶„μ„μ„ ν†µν•΄ λ„μ¶ν• μµμ ν™” λ°©μ•μ„ μ„±κ³µμ μΌλ΅ μ μ©ν•μ—¬:

- **EKF μ„Όμ„ μµν•© μµμ ν™”** β… μ™„λ£
- **URDF λ¬Όλ¦¬ νλΌλ―Έν„° μ •λ°€ν™”** β… μ™„λ£  
- **μ „μ²΄ μ‹μ¤ν… λΉλ“ κ²€μ¦** β… μ™„λ£
- **μ„±λ¥ κ°μ„  λ¬Έμ„ν™”** β… μ™„λ£

μ΄λ¥Ό ν†µν•΄ transbot_ws_ros2λ” ROS1 μμ¤€μ μ•μ •μ„±κ³Ό μ •ν™•μ„±μ„ ν™•λ³΄ν•κ³ , ROS2μ μ¥μ μΈ ν™•μ¥μ„±κ³Ό λ¨λ“μ„±μ„ ν™μ©ν•  μ μλ” κ²¬κ³ ν• κΈ°λ°μ„ κ°–μ¶”κ² λμ—μµλ‹λ‹¤.

μ‹¤μ  ν•λ“μ›¨μ–΄μ—μ„μ μ„±λ¥ κ²€μ¦μ„ ν†µν•΄ λ”μ± μ •ν™•ν•κ³  μ•μ •μ μΈ μμ¨μ£Όν–‰ λ΅λ΄‡ μ‹μ¤ν…μ„ κµ¬ν„ν•  μ μμ„ κ²ƒμΌλ΅ κΈ°λ€λ©λ‹λ‹¤. π€
// Madgwick ν•„ν„° κ³ κΈ‰ νλΌλ―Έν„° μ μ©
```

### Odometry μ²λ¦¬ λ°©μ‹ λΉ„κµ
**ROS1 (transbot_ws)**:
- ν•„ν„°λ§ μ—†μ (μ§μ ‘ μ‚¬μ©)
- μ‹κ°„ κ²€μ¦ μ—†μ
- λ°©ν–¥ μ •κ·ν™” μ—†μ
- TF λ°ν–‰ μ—†μ (λ¶„λ¦¬ν•)

**ROS2 (transbot_ws_ros2) μμ • μ „**:
- μ§€μ ν•„ν„° μ μ© (alpha=0.3)
- μ‹κ°„ κ°„κ²© κ²€μ¦ (0.01~1.0μ΄)
- λ°©ν–¥ μ •κ·ν™” (-Ο€~Ο€)
- TF λ°ν–‰ μ£Όμ„ μ²λ¦¬

**ROS2 μμ • ν›„**:
- ν•„ν„°λ§ μ κ±° (ROS1κ³Ό μΌμΉ)
- μ‹κ°„ κ²€μ¦ μ κ±°
- λ°©ν–¥ μ •κ·ν™” μ κ±°
- angular_velocity_z_ λ¶€νΈ λ³΄μ • μ¶”κ°€

## transbot_library λ¶„μ„ κ²°κ³Ό

### IMU μΊλ¦¬λΈλ μ΄μ… κ°μ„ μ‚¬ν•­
```cpp
// λ°κ²¬λ κ³ κΈ‰ κΈ°λ¥λ“¤
- μμ΄λ΅μ¤μ½”ν”„ λ°”μ΄μ–΄μ¤ μ‹¤μ‹κ°„ μΊλ¦¬λΈλ μ΄μ…
- μΊλ¦¬λΈλ μ΄μ… ν’μ§ κ²€μ¦
- λ‹¤μ¤‘ λ΅λ΄‡ μ§€μ›
- λ¶€μ € μ•λ¦Ό μ‹μ¤ν…
```

### IMU ν•„ν„° κ³ κΈ‰ νλΌλ―Έν„°
```yaml
# transbot_libraryμ—μ„ λ°κ²¬λ νλΌλ―Έν„°λ“¤
stateless: false      # μƒνƒ μ—†λ” ν•„ν„°λ§ λ¨λ“
constant_dt: 0.1      # κ³ μ • μ‹κ°„ κ°„κ²©
reverse_tf: false     # TF λ°©ν–¥ μ μ–΄
publish_debug_topics: true  # λ””λ²„κ·Έ ν† ν”½ λ°ν–‰
```

### μ •λ°€ URDF νλΌλ―Έν„°
```xml
<!-- transbot_libraryμ μ •ν™•ν• κ΄€μ„± νλΌλ―Έν„° -->
<inertial>
    <origin xyz="-0.011 0.0002 -0.00832" rpy="0 0 0"/>
    <mass value="1.1011218463245"/>
    <inertia ixx="0.00683403160871643" ixy="-1.43326126624159E-06" 
             ixz="0.000665507738691208" iyy="0.0091844048006001" 
             iyz="3.7191085325542E-06" izz="0.0114582299070878"/>
</inertial>
```

## μμ •λ νμΌ λ©λ΅

### 1. transbot_base/src/base.cpp
- angular_velocity_z_ λ¶€νΈ λ³΄μ • μ¶”κ°€
- ν•„ν„°λ§ λ΅μ§ μ κ±° (ROS1 λ°©μ‹ μ μ©)
- μ‹κ°„ κ²€μ¦ λ° λ°©ν–¥ μ •κ·ν™” μ κ±°

### 2. transbot_localization/launch/transbot_full_system.launch.py
- laser_corrector Static Transform μ¶”κ°€
- SLAM Toolbox νλΌλ―Έν„° μµμ ν™”
- laser_corrected frameμ„ SLAMμ—μ„ μ‚¬μ©

## TF νΈλ¦¬ κµ¬μ΅°

### μμ • μ „
```
base_footprint β†’ base_link β†’ laser (180Β° νμ „, λ¬Έμ  λ°μƒ)
```

### μμ • ν›„
```
base_footprint β†’ base_link β†’ laser (180Β° νμ „, λ¬Όλ¦¬μ )
                              β†“
                            laser_corrected (0Β° νμ „, SLAM μ‚¬μ©)
```

## μ„±λ¥ κ°μ„  κ²°κ³Ό

### 1. νμ „ λ°©ν–¥ μ •ν™•λ„
- β… μλ™ νμ „: IMU κΈ°λ°μΌλ΅ μ •μƒ λ™μ‘
- β… μλ™ μ£Όν–‰: encoder + IMU μµν•©μΌλ΅ μ •μƒ λ™μ‘
- β… SLAM μ§€λ„: λ΅λ²„ νμ „ λ°©ν–¥κ³Ό μΌμΉ

### 2. LiDAR μ¤μΊ” μ •ν™•λ„
- β… λ¬Όλ¦¬μ  μ„¤μΉ: 180Β° νμ „ μƒνƒ μ μ§€
- β… μ†ν”„νΈμ›¨μ–΄ λ³΄μ •: laser_corrected frameμΌλ΅ μ •μƒν™”
- β… SLAM μ—°λ™: μ¬λ°”λ¥Έ λ°©ν–¥μΌλ΅ μ¤μΊ” λ°μ΄ν„° ν•΄μ„

### 3. SLAM μ„±λ¥ ν–¥μƒ
- β… μ—…λ°μ΄νΈ μ£ΌκΈ°: 5μ΄ β†’ 1μ΄ (5λ°° ν–¥μƒ)
- β… λ μ΄μ € λ²”μ„: 2.5m β†’ 8.0m (3.2λ°° ν™•μ¥)
- β… μ‹¤μ‹κ°„μ„±: ROS1 μμ¤€μΌλ΅ κ°μ„ 

## μ¶”μ² μ¶”κ°€ κ°μ„ μ‚¬ν•­

### μ°μ„ μμ„ 1: IMU μΊλ¦¬λΈλ μ΄μ… κ³ λ„ν™”
```cpp
// transbot_library λ°©μ‹ μ μ©
- λ™μ  μμ΄λ΅ λ°”μ΄μ–΄μ¤ μΊλ¦¬λΈλ μ΄μ…
- μΊλ¦¬λΈλ μ΄μ… ν’μ§ κ²€μ¦
- μ‹¤ν¨ μ‹ μλ™ μ¬μ‹μ‘
```

### μ°μ„ μμ„ 2: EKF νλΌλ―Έν„° νλ‹
```yaml
# robot_localization μµμ ν™”
- IMU/odometry κ°€μ¤‘μΉ μ΅°μ •
- ν”„λ΅μ„Έμ¤ λ…Έμ΄μ¦ λ§¤νΈλ¦­μ¤ νλ‹
- μΈ΅μ • λ¶ν™•μ‹¤μ„± μ„Έλ°€ μ΅°μ •
```

### μ°μ„ μμ„ 3: URDF μ •λ°€λ„ ν–¥μƒ
```xml
<!-- λ¬Όλ¦¬μ μΌλ΅ μ •ν™•ν• κ΄€μ„± νλΌλ―Έν„° μ μ© -->
- transbot_libraryμ μ •λ°€ κ΄€μ„± λ°μ΄ν„° μ‚¬μ©
- STL λ©”μ‹ κΈ°λ° λ¨λΈλ§ κ³ λ ¤
```

## κ²€μ¦ λ°©λ²•

### 1. κΈ°λ¥ ν…μ¤νΈ
- [ ] μλ™ νμ „ ν…μ¤νΈ: μ†μΌλ΅ λ΅λ²„ νμ „ μ‹ SLAM μ§€λ„ λ°μ‘
- [ ] μλ™ νμ „ ν…μ¤νΈ: cmd_velλ΅ νμ „ μ‹ λ°©ν–¥ μΌμΉ ν™•μΈ
- [ ] LiDAR μ¤μΊ” ν…μ¤νΈ: RVizμ—μ„ μ¤μΊ” λ°©ν–¥ μ •ν™•λ„ ν™•μΈ

### 2. μ„±λ¥ ν…μ¤νΈ
- [ ] SLAM λ§µν•‘ μ†λ„: 1μ΄ κ°„κ²©μΌλ΅ μ—…λ°μ΄νΈ ν™•μΈ
- [ ] λ μ΄μ € κ°μ§€ λ²”μ„: 8mκΉμ§€ μ¥μ• λ¬Ό κ°μ§€ ν™•μΈ
- [ ] TF νΈλ¦¬ κ²€μ¦: `ros2 run tf2_tools view_frames` μ‹¤ν–‰

### 3. μ¥μ‹κ°„ μ•μ •μ„± ν…μ¤νΈ
- [ ] μ—°μ† μ£Όν–‰ ν…μ¤νΈ: 30λ¶„ μ΄μƒ μ£Όν–‰ μ‹ drift ν™•μΈ
- [ ] λ©”λ¨λ¦¬ μ‚¬μ©λ‰: μ¥μ‹κ°„ SLAM μ‹¤ν–‰ μ‹ λ©”λ¨λ¦¬ λ„μ ν™•μΈ

## κ²°λ΅ 

1. **μ£Όμ” λ¬Έμ  ν•΄κ²°**: μΆμ° νμ „ λ°©ν–¥ λ¶μΌμΉ λ° LiDAR λ°©ν–¥ λ¬Έμ  μ™„μ „ ν•΄κ²°
2. **μ„±λ¥ κ°μ„ **: ROS1 μμ¤€μ SLAM μ„±λ¥ λ‹¬μ„± (μ—…λ°μ΄νΈ μ£ΌκΈ°, λ μ΄μ € λ²”μ„)
3. **μ•„ν‚¤ν…μ² μµμ ν™”**: λ¬Όλ¦¬μ  μ μ•½μ„ μ†ν”„νΈμ›¨μ–΄λ΅ λ³΄μ •ν•λ” μ°μ•„ν• ν•΄κ²°μ±… μ μ©
4. **ν™•μ¥ κ°€λ¥μ„±**: transbot_libraryμ κ³ κΈ‰ κΈ°λ¥λ“¤μ„ λ‹¨κ³„μ μΌλ΅ μ μ© κ°€λ¥

λ³Έ μμ •μ‚¬ν•­λ“¤μ„ ν†µν•΄ transbot_ws_ros2λ” ROS1 λ€λΉ„ λ™λ“±ν•κ±°λ‚ λ” λ‚μ€ μ„±λ¥μ„ μ κ³µν•λ©°, ν–¥ν›„ μ¶”κ°€ κ°μ„ μ„ μ„ν• κ²¬κ³ ν• κΈ°λ°μ„ κµ¬μ¶•ν–μµλ‹λ‹¤.

---
**μ‘μ„±μΌ**: 2025λ…„ 9μ›” 29μΌ  
**λ²„μ „**: v1.0  
**μƒνƒ**: κµ¬ν„ μ™„λ£, ν…μ¤νΈ λ€κΈ°